plugins {
    id 'net.neoforged.gradle.vanilla' version '7.0.107' apply false
    id 'net.neoforged.gradle.userdev' version '7.0.107' apply false
    id 'fabric-loom' version '1.6-SNAPSHOT'

    id 'com.matthewprenger.cursegradle' version '1.4.0'
    id 'com.modrinth.minotaur' version '2.+'
}

repositories {
    maven { url = 'https://maven.parchmentmc.org' }
}

dependencies {
    minecraft "com.mojang:minecraft:${mc_version}"
    mappings loom.layered {
        officialMojangMappings()
        parchment("org.parchmentmc.data:parchment-${parchment_mc_version}:${parchmentVersion}@zip")
    }

    modImplementation "net.fabricmc:fabric-loader:${fabric_loader_version}"
    modImplementation "net.fabricmc.fabric-api:fabric-api:${fabric_version}"

    implementation project(":CommonApi")
}

loom.runs {
    named("client") {
        client()
        configName = "FabricClient"
        ideConfigGenerated(true)
        runDir("run/client")
    }
}

curseforge {
    apiKey = "${curseforgeApiToken}"
    project {
        id = "${curseProjectId}"
        changelog = ""
        releaseType = "release"
        addGameVersion "${mc_version}"

        mainArtifact(remapJar) {
            displayName = "GuidebookApi-Fabric-${mod_version}"

            relations {
                requiredDependency "fabric-api"
            }
        }
    }
}


modrinth {
    token = "${modrinthToken}"
    projectId = "${modrinthProjectId}"
    versionName = "GuidebookAPI-Fabric"
    versionNumber = "${mod_version}"
    uploadFile = remapJar
    gameVersions = ["${mc_version}"] as Iterable
    loaders = ['fabric']

    dependencies {
        required.project 'fabric-api'
    }
}